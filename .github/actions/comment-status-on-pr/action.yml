name: Comment status on PR
description: This action comments on a pull request with the status of the tests

runs:
  using: composite
  steps:
    - name: Comment on PR
      id: comment-pr
      uses: thollander/actions-comment-pull-request@v3
      env:
        MESSAGE_FAIL: 'ðŸš¨ Some tests failed! ðŸš¨ Please review the logs before approving or taking the risk. <br>The following are the tests that failed:<br>${{ env.FAILED_TESTS }}'
        MESSAGE_SUCCESS: 'âœ… All tests passed. Great job! âœ…'
      with:
        comment-tag: to-update
        mode: upsert
        message: |
          ${{ env.TEST_EXIT_CODE == '0' && env.MESSAGE_SUCCESS || env.MESSAGE_FAIL}}
